<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Spinner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            text-align: center;
        }
        
        h1 {
            color: #8b0000;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .spinner-container {
            position: relative;
            margin: 40px auto;
            width: 300px;
            height: 300px;
        }
        
        /* SPINNER SEDERHANA DENGAN CONIC-GRADIENT - TIDAK BERTUMPUK */
        .spinner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            background: conic-gradient(
                from 0deg,
                #8b0000 0deg 18deg,
                #8b0000 18deg 36deg,
                #8b0000 36deg 54deg,
                #8b0000 54deg 72deg,
                #8b0000 72deg 90deg,
                #8b0000 90deg 108deg,
                #8b0000 108deg 126deg,
                #8b0000 126deg 144deg,
                #8b0000 144deg 162deg,
                #8b0000 162deg 180deg,
                #8b0000 180deg 198deg,
                #8b0000 198deg 216deg,
                #8b0000 216deg 234deg,
                #8b0000 234deg 252deg,
                #8b0000 252deg 270deg,
                #8b0000 270deg 288deg,
                #8b0000 288deg 306deg,
                #8b0000 306deg 324deg,
                #8b0000 324deg 342deg,
                #8b0000 342deg 360deg
            );
            border: 10px solid #8b0000;
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.3, 1);
            box-shadow: 0 10px 30px rgba(139, 0, 0, 0.2);
        }
        
        /* GARIS PEMBAGI ANTAR ANGKA - RAPI */
        .spinner::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: conic-gradient(
                transparent 0deg 17deg,
                white 17deg 18deg,
                transparent 18deg 35deg,
                white 35deg 36deg,
                transparent 36deg 53deg,
                white 53deg 54deg,
                transparent 54deg 71deg,
                white 71deg 72deg,
                transparent 72deg 89deg,
                white 89deg 90deg,
                transparent 90deg 107deg,
                white 107deg 108deg,
                transparent 108deg 125deg,
                white 125deg 126deg,
                transparent 126deg 143deg,
                white 143deg 144deg,
                transparent 144deg 161deg,
                white 161deg 162deg,
                transparent 162deg 179deg,
                white 179deg 180deg,
                transparent 180deg 197deg,
                white 197deg 198deg,
                transparent 198deg 215deg,
                white 215deg 216deg,
                transparent 216deg 233deg,
                white 233deg 234deg,
                transparent 234deg 251deg,
                white 251deg 252deg,
                transparent 252deg 269deg,
                white 269deg 270deg,
                transparent 270deg 287deg,
                white 287deg 288deg,
                transparent 288deg 305deg,
                white 305deg 306deg,
                transparent 306deg 323deg,
                white 323deg 324deg,
                transparent 324deg 341deg,
                white 341deg 342deg,
                transparent 342deg 360deg
            );
            border-radius: 50%;
            pointer-events: none;
        }
        
        /* ANGKA DI SPINNER */
        .number {
            position: absolute;
            color: white;
            font-weight: bold;
            font-size: 18px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            z-index: 2;
            transform-origin: center;
        }
        
        /* POINTER - PASTI DI 0 DERAJAT */
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid #8b0000;
            z-index: 10;
            filter: drop-shadow(0 3px 5px rgba(0,0,0,0.3));
        }
        
        .pointer::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background: #8b0000;
            border-radius: 50%;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* TOMBOL PUTAR */
        .spin-btn {
            margin: 30px 0;
            background: #8b0000;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(139, 0, 0, 0.4);
            font-weight: 600;
        }
        
        .spin-btn:hover {
            background: #a52a2a;
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(139, 0, 0, 0.5);
        }
        
        .spin-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 5px 15px rgba(156, 163, 175, 0.4);
        }
        
        /* HASIL YANG MUNCUL SETELAH SPIN */
        .result-container {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            width: 100%;
            max-width: 400px;
            border: 2px solid #8b0000;
            box-shadow: 0 15px 35px rgba(139, 0, 0, 0.15);
        }
        
        .result-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .genre {
            color: #8b0000;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 15px;
        }
        
        .prompt {
            color: #333;
            font-size: 1.1rem;
            line-height: 1.6;
            padding: 15px;
            background: #fff5f5;
            border-radius: 10px;
            border-left: 4px solid #8b0000;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spinPulse {
            0%, 100% { box-shadow: 0 10px 30px rgba(139, 0, 0, 0.2); }
            50% { box-shadow: 0 10px 40px rgba(139, 0, 0, 0.6); }
        }
        
        .spinning {
            animation: spinPulse 0.5s infinite alternate;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Prompt Spinner</h1>
        
        <div class="spinner-container">
            <div class="pointer"></div>
            <div class="spinner" id="spinner">
                <!-- Angka akan ditambahkan dengan JavaScript -->
            </div>
        </div>
        
        <button class="spin-btn" id="spinBtn">
            PUTAR SPINNER
        </button>
        
        <div class="result-container" id="resultContainer">
            <div class="genre" id="genre">-</div>
            <div class="prompt" id="prompt">-</div>
        </div>
    </div>

    <script>
        // DATA PROMPT UNTUK SETIAP ANGKA (1-20)
        const prompts = {
            1: {
                genre: "MISTERI",
                prompt: "Detektif pensiunan dipanggil menyelidiki kasus pembunuhan di kota kecil. Semua bukti mengarah pada orang yang sudah meninggal 10 tahun lalu."
            },
            2: {
                genre: "CINTA",
                prompt: "Dua musuh sejak SMA dipaksa bekerja sama dalam proyek kantor. Di balik permusuhan, ternyata ada perasaan yang disembunyikan bertahun-tahun."
            },
            3: {
                genre: "PETUALANGAN",
                prompt: "Peta kuno warisan kakek mengarah pada harta karun di pulau terpencil. Tapi pulau itu tidak ada dalam peta manapun di dunia."
            },
            4: {
                genre: "FANTASI",
                prompt: "Pustakawan menemukan buku yang bisa mengubah ending cerita. Setiap perubahan mempengaruhi dunia nyata."
            },
            5: {
                genre: "SCI-FI",
                prompt: "Peneliti waktu tanpa sengaja terjebak di tahun 1985. Untuk kembali, dia harus menemukan penemu mesin waktu yang masih anak-anak."
            },
            6: {
                genre: "DRAMA",
                prompt: "Keluarga yang terpecah karena warisan harus bersatu kembali ketika adik bungsu didiagnosis sakit langka."
            },
            7: {
                genre: "THRILLER",
                prompt: "Orang asing mengaku sebagai kembaran identik yang hilang. Semua bukti mendukung klaimnya, tapi ada sesuatu yang sangat salah."
            },
            8: {
                genre: "HORROR",
                prompt: "Rumah baru yang sempurna ternyata memiliki cermin yang memantulkan versi berbeda dari penghuninya."
            },
            9: {
                genre: "KOMEDI",
                prompt: "Penipu ulung tanpa sengaja menipu mafia dan sekarang harus berpura-pura menjadi bos mafia yang hilang."
            },
            10: {
                genre: "SEJARAH",
                prompt: "Mahasiswa sejarah menemukan surat yang membuktakan adanya kerajaan yang dihapus dari catatan sejarah."
            },
            11: {
                genre: "ROMANTIS",
                prompt: "Perjodohan oleh keluarga yang awalnya ditolak, ternyata mereka adalah penulis dan penggemar rahasia satu sama lain."
            },
            12: {
                genre: "AKSI",
                prompt: "Kurir khusus harus mengantar paket melintasi kota yang dikepung zombie. Paket itu adalah vaksin terakhir."
            },
            13: {
                genre: "MUSIKAL",
                prompt: "Grup band yang bubar 20 tahun lalu mendapat tawaran reunion. Tapi ada rahasia besar di balik bubarnya band itu."
            },
            14: {
                genre: "ANIME",
                prompt: "Siswa SMA biasa mendapat kekuatan mengendalikan mimpi orang lain. Dia gunakan untuk membantu, tapi ada yang memata-matai."
            },
            15: {
                genre: "SUPERHERO",
                prompt: "Pahlawan super pensiunan dipaksa kembali ketika musuh lamanya muncul. Tapi kali ini, musuhnya meminta bantuan."
            },
            16: {
                genre: "DOKUMENTER",
                prompt: "Jurnalis menyelidiki perusahaan yang mengklaim bisa menghapus ingatan buruk. Tapi ada klien yang ingatannya salah dihapus."
            },
            17: {
                genre: "FAMILY",
                prompt: "Kakek dan cucu melakukan road trip menyelesaikan daftar keinginan nenek yang meninggal. Setiap tujuan punya cerita."
            },
            18: {
                genre: "PSIKOLOGIS",
                prompt: "Terapis tanpa sengaja menyembuhkan pasien amnesia. Pasien itu ternyata saksi kunci kasus pembunuhan yang melibatkan terapis."
            },
            19: {
                genre: "SPORT",
                prompt: "Atlet cedera menemukan bakat melatih. Dia latih tim underdog untuk melawan mantan timnya di final."
            },
            20: {
                genre: "BIOPIC",
                prompt: "Ilmuwan perempuan di era 1950an harus menyembunyikan identitasnya untuk mempublikasikan penemuan revolusioner."
            }
        };

        // ELEMEN DOM
        const spinner = document.getElementById('spinner');
        const spinBtn = document.getElementById('spinBtn');
        const resultContainer = document.getElementById('resultContainer');
        const genreEl = document.getElementById('genre');
        const promptEl = document.getElementById('prompt');
        
        // VARIABEL KONTROL
        let isSpinning = false;
        let currentRotation = 0;
        const totalNumbers = 20;
        const anglePerNumber = 360 / totalNumbers;
        
        // INISIALISASI SPINNER DENGAN ANGKA
        function initSpinner() {
            // Tambahkan angka 1-20 di spinner
            for (let i = 1; i <= totalNumbers; i++) {
                const numberEl = document.createElement('div');
                numberEl.className = 'number';
                numberEl.textContent = i;
                numberEl.id = `num${i}`;
                
                // Hitung posisi angka
                const angle = (i - 1) * anglePerNumber + anglePerNumber/2; // Tengah segmen
                const radius = 110; // Jarak dari pusat
                
                // Konversi polar ke cartesian
                const radian = (angle * Math.PI) / 180;
                const x = radius * Math.cos(radian);
                const y = radius * Math.sin(radian);
                
                // Posisikan angka
                numberEl.style.left = `calc(50% + ${x}px)`;
                numberEl.style.top = `calc(50% + ${y}px)`;
                numberEl.style.transform = `translate(-50%, -50%)`;
                
                spinner.appendChild(numberEl);
            }
        }
        
        // FUNGSI PUTAR SPINNER
        function spin() {
            if (isSpinning) return;
            
            isSpinning = true;
            spinBtn.disabled = true;
            spinner.classList.add('spinning');
            resultContainer.classList.remove('show');
            
            // Pilih angka random (1-20)
            const selectedNumber = Math.floor(Math.random() * totalNumbers) + 1;
            
            // PERHITUNGAN ROTASI YANG BENAR:
            // Pointer di 0°, kita ingin ANGKA yang terpilih berhenti di pointer
            // Rumus: targetRotation = 360 - ((angka - 1) * 18°) - 9°
            // Kenapa -9°? Karena kita ingin TENGAH segmen (bukan awal) berhenti di pointer
            
            const targetRotation = 360 - ((selectedNumber - 1) * anglePerNumber) - (anglePerNumber / 2);
            const fullRotations = 5;
            
            // Total rotasi
            const totalRotation = currentRotation + (360 * fullRotations) + targetRotation;
            
            // Simpan rotasi saat ini
            currentRotation = totalRotation % 360;
            
            // Putar spinner
            spinner.style.transition = 'transform 3s cubic-bezier(0.2, 0.8, 0.3, 1)';
            spinner.style.transform = `rotate(${totalRotation}deg)`;
            
            // Tampilkan hasil setelah 3 detik
            setTimeout(() => {
                spinner.classList.remove('spinning');
                spinBtn.disabled = false;
                isSpinning = false;
                
                // Tampilkan prompt sesuai angka
                showPrompt(selectedNumber);
                
                console.log(`Angka: ${selectedNumber}, Rotasi akhir: ${currentRotation.toFixed(1)}°`);
            }, 3000);
        }
        
        // TAMPILKAN PROMPT
        function showPrompt(number) {
            const data = prompts[number];
            if (data) {
                genreEl.textContent = data.genre;
                promptEl.textContent = data.prompt;
                resultContainer.classList.add('show');
            }
        }
        
        // EVENT LISTENER
        spinBtn.addEventListener('click', spin);
        
        // Shortcut keyboard: Spasi untuk spin
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && !isSpinning) {
                e.preventDefault();
                spin();
            }
        });
        
        // INISIALISASI
        document.addEventListener('DOMContentLoaded', () => {
            initSpinner();
        });
    </script>
</body>
</html>
